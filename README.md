# üíô –¢–≤–æ—è –õ–∏–Ω–∏—è ‚Äî Dating Bot MVP

Telegram-–±–æ—Ç –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –¥–ª—è –ø–ª—é—Å-—Å–∞–π–∑ –∂–µ–Ω—â–∏–Ω —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É–≤–∞–∂–µ–Ω–∏–µ.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cp .env.example .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `BOT_TOKEN` ‚Äî –ø–æ–ª—É—á–∏—Ç–µ —É [@BotFather](https://t.me/BotFather)
- `ADMIN_IDS` ‚Äî –≤–∞—à Telegram ID (—É–∑–Ω–∞—Ç—å: [@userinfobot](https://t.me/userinfobot))

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
npm run prisma:migrate
```

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

**Development (—Å hot-reload):**
```bash
npm run dev
```

**Production:**
```bash
npm start
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/workspace
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ callbacks
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/       # FSM, auth, rate-limit
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/         # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ conversations/     # FSM —Å—Ü–µ–Ω–∞—Ä–∏–∏ (onboarding, profile)
‚îÇ   ‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.service.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ moderation.service.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scoring.js         # –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–±–æ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stopwords.js       # –ê–Ω—Ç–∏-—Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ geo.js             # –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.js
‚îÇ   ‚îú‚îÄ‚îÄ bot.js                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ index.js               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îú‚îÄ‚îÄ data/                      # SQLite –±–∞–∑–∞ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ .env                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îî‚îÄ‚îÄ package.json
```

---

## üõ† –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npm run prisma:migrate

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (GUI –¥–ª—è –ë–î)
npm run prisma:studio

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è schema
npm run prisma:generate
```

### –ë–æ—Ç

```bash
# –ó–∞–ø—É—Å–∫ —Å hot-reload
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω –∑–∞–ø—É—Å–∫
npm start
```

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ MVP

‚úÖ **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** ‚Äî 30 —Å–µ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è  
‚úÖ **–ê–Ω–∫–µ—Ç—ã** ‚Äî —Ñ–æ—Ç–æ, —Ç–µ–∫—Å—Ç, –∏–Ω—Ç–µ—Ä–µ—Å—ã  
‚úÖ **–ü–æ–∏—Å–∫** ‚Äî —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (–≤–æ–∑—Ä–∞—Å—Ç, —Ü–µ–ª–∏, —Ä–∞–¥–∏—É—Å)  
‚úÖ **–ß–∞—Ç** ‚Äî –≤–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞ —Å –ª–∏–º–∏—Ç–∞–º–∏  
‚úÖ **–ú–∞—Ç—á–∏** ‚Äî –≤–∑–∞–∏–º–Ω—ã–µ –ª–∞–π–∫–∏  
‚úÖ **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –∞–¥–º–∏–Ω–æ–º  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî —Å—Ç–æ–ø-—Å–ª–æ–≤–∞, –∂–∞–ª–æ–±—ã, –±–∞–Ω—ã  
‚úÖ **–ü—Ä–µ–º–∏—É–º** ‚Äî —á–µ—Ä–µ–∑ Telegram Stars  
‚úÖ **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–æ–¥–µ—Ä–∞—Ü–∏—è  

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –°—Ç–æ–ø-—Å–ª–æ–≤–∞
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–∫—Å–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–æ –≤–µ—Å/–≤–Ω–µ—à–Ω–æ—Å—Ç—å.

### Rate Limits
- 10 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å –±–µ–∑ –º–∞—Ç—á–∞ (50 —Å Premium)
- 20 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∞–Ω–∫–µ—Ç/—á–∞—Å
- 3 –∂–∞–ª–æ–±—ã/–¥–µ–Ω—å

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è
- –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ–ø–æ—Ä—Ç—ã (—Ñ–µ–π–∫, —à–µ–π–º–∏–Ω–≥, –¥–æ–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–∞, —Å–ø–∞–º)
- –ê–¥–º–∏–Ω-–æ—á–µ—Ä–µ–¥—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- 3-strike —Å–∏—Å—Ç–µ–º–∞: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ ‚Üí –º—É—Ç 24—á ‚Üí –±–∞–Ω

---

## üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

### Telegram Stars

**Premium (300 Stars ‚âà 200‚ÇΩ/–º–µ—Å):**
- 5 —Å–æ–æ–±—â–µ–Ω–∏–π –¥–æ –º–∞—Ç—á–∞ (–≤–º–µ—Å—Ç–æ 1)
- –ë–µ–π–¥–∂ ‚≠ê Premium
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–∏—Å–∫–µ

**–°—É–ø–µ—Ä-–∏–Ω—Ç–µ—Ä–µ—Å (50 Stars):** [–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ]
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—é
- –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –≤–µ—Å –≤ –ø–æ–¥–±–æ—Ä–∫–µ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã
- [ ] –ü–æ–∏—Å–∫ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å –ª–∏–º–∏—Ç–æ–º)
- [ ] –í–∑–∞–∏–º–Ω—ã–π –ª–∞–π–∫ ‚Üí –º–∞—Ç—á
- [ ] –ü–æ–∫—É–ø–∫–∞ Premium —á–µ—Ä–µ–∑ Stars
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –∂–∞–ª–æ–±—ã
- [ ] –ê–¥–º–∏–Ω: –º–æ–¥–µ—Ä–∞—Ü–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–°–æ–∑–¥–∞–π—Ç–µ 3-5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ Telegram –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞–∑–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã.

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ MVP

–¶–µ–ª—å –ø–µ—Ä–≤–æ–≥–æ –º–µ—Å—è—Ü–∞:
- **100+** –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
- **50+** –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç
- **20+** –º–∞—Ç—á–µ–π
- **10+** –ø–æ–∫—É–ø–æ–∫ Premium

---

## üöß –ß—Ç–æ –ù–ï –≤–æ—à–ª–æ –≤ MVP

(–î–æ–±–∞–≤–∏–º –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–∏–ø–æ—Ç–µ–∑—ã)

- ‚ùå YooKassa (–∫–∞—Ä—Ç—ã/–°–ë–ü)
- ‚ùå ML-–º–æ–¥–µ—Ä–∞—Ü–∏—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
- ‚ùå –í–∏–¥–µ–æ-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚ùå –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥–±–æ—Ä–∫–∏ ("–°–µ–º—å—è", "–°–µ–≥–æ–¥–Ω—è")
- ‚ùå Icebreakers
- ‚ùå –†–µ–∂–∏–º "–ø—Ä–∏–∑—Ä–∞–∫"
- ‚ùå "–ö—Ç–æ —Å–º–æ—Ç—Ä–µ–ª –º–µ–Ω—è"
- ‚ùå –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [MVP Specification](./MVP_SPEC.md) ‚Äî –ø–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- [Full Technical Spec](./FULL_SPEC.md) ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –¢–ó

---

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_TOKEN` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`npm run dev`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
rm -rf data/database.db
npm run prisma:migrate
```

### Telegram API errors
- Rate limit: –ø–æ–¥–æ–∂–¥–∏—Ç–µ 1 –º–∏–Ω—É—Ç—É
- Invalid token: –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É @BotFather

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í–æ–ø—Ä–æ—Å—ã –∏ –±–∞–≥–∏: [GitHub Issues](https://github.com/yourproject/issues)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
